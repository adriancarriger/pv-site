{"version":3,"file":"preload.service.js","sourceRoot":"","sources":["../../src/app/services/preload.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2B,eAAe,CAAC,CAAA;AAC3C,uCAAqC,0BAA0B,CAAC,CAAA;AAGhE;IAGE,wBAAmB,oBAA0C;QAA1C,yBAAoB,GAApB,oBAAoB,CAAsB;QAFtD,aAAQ,GAAG,CAAC,CAAC;IAE4C,CAAC;IAEjE,6BAAI,GAAJ;QACE,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QACrC,wCAAwC;IAC1C,CAAC;IACD,qCAAY,GAAZ;QACE,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC/B,CAAC;IACD,qCAAY,GAAZ;QACE,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAChD,CAAC;IACD,wCAAe,GAAf;QAAA,iBAQC;QAPC,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAChD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;gBACxB,KAAI,CAAC,IAAI,EAAE,CAAC;YACd,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC;IACH,CAAC;IA1BH;QAAC,iBAAU,EAAE;;sBAAA;IA4Bb,qBAAC;AAAD,CAAC,AA3BD,IA2BC;AA3BY,sBAAc,iBA2B1B,CAAA","sourcesContent":["import { Injectable } from '@angular/core';\nimport { ApiObservableService } from './api-observable.service';\n\n@Injectable()\nexport class PreloadService {\n  public promises = 0;\n  private timeout;\n  constructor(public apiObservableService: ApiObservableService) {}\n\n  load() {\n    console.log('preloading started...');\n    // this.apiObservableService.fullLoad();\n  }\n  preloadReady() {\n    return this.promises++ === 0;\n  }\n  requestStart() {\n    this.promises++;\n    clearTimeout(this.timeout);\n    console.log('Requesting data', this.promises);\n  }\n  requestComplete() {\n    this.promises--;\n    console.log('Api just got data', this.promises);\n    if (this.promises === 0) {\n      this.timeout = setTimeout(() => {\n        this.load();\n      }, 3500);\n    }\n  }\n\n}\n"]}