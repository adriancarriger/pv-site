{"version":3,"file":"auth.service.js","sourceRoot":"","sources":["../../src/app/services/auth.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2B,eAAe,CAAC,CAAA;AAC3C,6BAA8B,cAAc,CAAC,CAAA;AAC7C,QAAO,SAAS,CAAC,CAAA;AACjB,qBAAmB,eAAe,CAAC,CAAA;AACnC,iCAA8B,oBAAoB,CAAC,CAAA;AAOnD;IASE,qBAAmB,IAAU,EAAS,EAAmB;QAAtC,SAAI,GAAJ,IAAI,CAAM;QAAS,OAAE,GAAF,EAAE,CAAiB;QAPzD,SAAI,GAAG,IAAI,SAAS,CAAC,kCAAkC,EAAE,0BAA0B,CAAC,CAAC;QAErF,UAAK,GAAG,IAAI,KAAK,CAAC;YAChB,MAAM,EAAE,0BAA0B;YAClC,QAAQ,EAAE,kCAAkC;SAC7C,CAAC,CAAC;IAEyD,CAAC;IAE7D,2BAAK,GAAL;QAAA,iBAoBC;QAnBC,IAAI,OAAO,GAAG,EAAC,mBAAmB,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAC,CAAC;QACxF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAC,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,YAAY;YAC5E,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACR,KAAK,CAAC,GAAG,CAAC,CAAC;YACb,CAAC;YACD,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YACzD,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YACxC,gCAAgC;YAChC,IAAI,UAAU,GAAG;gBACf,QAAQ,EAAE,KAAK;gBACf,GAAG,EAAE,UAAU;gBACf,OAAO,EAAE,gBAAgB;aAC1B,CAAC;YACF,KAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,UAAU,EAAE,UAAC,aAAa,EAAE,gBAAgB;gBACtE,YAAY,CAAC,OAAO,CAAC,SAAS,EAAE,gBAAgB,CAAC,QAAQ,CAAC,CAAC;gBAC3D,sCAAsC;gBACtC,KAAI,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,4BAAM,GAAN;QACE,YAAY,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACnC,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IAEtC,CAAC;IAED,8BAAQ,GAAR;QACE,MAAM,CAAC,8BAAe,EAAE,CAAC;IAC3B,CAAC;IA1CH;QAAC,iBAAU,EAAE;;mBAAA;IA4Cb,kBAAC;AAAD,CAAC,AA3CD,IA2CC;AA3CY,mBAAW,cA2CvB,CAAA","sourcesContent":["import { Injectable } from '@angular/core';\nimport {tokenNotExpired} from 'angular2-jwt';\nimport 'rxjs/Rx';\nimport {Http} from '@angular/http';\nimport {FirebaseService} from './firebase.service';\n\n// Avoid name not found warnings\ndeclare let Auth0Lock: any;\ndeclare let Auth0: any;\n\n@Injectable()\nexport class AuthService {\n\n  lock = new Auth0Lock('ZoikOBvoT8pxABEwEh90HrAuTeBwSpdh', 'adriancarriger.auth0.com');\n\n  auth0 = new Auth0({\n    domain: 'adriancarriger.auth0.com',\n    clientID: 'ZoikOBvoT8pxABEwEh90HrAuTeBwSpdh'\n  });\n\n  constructor(public http: Http, public fb: FirebaseService) {}\n\n  login() {\n    let options = {'rememberLastLogin': false, 'socialBigButtons': true, 'gravatar': false};\n    this.lock.show(options, (err, profile, token, accessToken, state, refreshToken) => {\n      if (err) {\n        alert(err);\n      }\n      localStorage.setItem('profile', JSON.stringify(profile));\n      localStorage.setItem('id_token', token);\n      // Get Firebase delegation token\n      let delOptions = {\n        id_token: token,\n        api: 'firebase',\n        'scope': 'openid profile'\n      };\n      this.auth0.getDelegationToken(delOptions, (delegationErr, delegationResult) => {\n          localStorage.setItem('fbToken', delegationResult.id_token);\n          // Call Firebase custom authentication\n          this.fb.auth(delegationResult.id_token);\n      });\n    });\n  }\n\n  logout() {\n    localStorage.removeItem('profile');\n    localStorage.removeItem('id_token');\n\n  }\n\n  loggedIn() {\n    return tokenNotExpired();\n  }\n\n}\n"]}