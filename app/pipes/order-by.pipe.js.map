{"version":3,"file":"order-by.pipe.js","sourceRoot":"","sources":["../../src/app/pipes/order-by.pipe.ts"],"names":[],"mappings":"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","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'orderBy'\n})\nexport class OrderBy implements PipeTransform {\n  static _orderByComparator(a: any, b: any): number {\n    if (a === undefined) { return; }\n    if ((isNaN(parseFloat(a)) || !isFinite(a)) || (isNaN(parseFloat(b)) || !isFinite(b))) {\n      // Isn't a number so lowercase the string to properly compare\n      if (a.toLowerCase() < b.toLowerCase()) { return -1; }\n      if (a.toLowerCase() > b.toLowerCase()) { return 1; }\n    } else {\n      // Parse strings as numbers to compare properly\n      if (parseFloat(a) < parseFloat(b)) { return -1; }\n      if (parseFloat(a) > parseFloat(b)) { return 1; }\n    }\n\n    return 0; // equal each other\n  }\n\n  transform(input: any, config = '+', special?): any {\n    if (!Array.isArray(input)) { return input; }\n    if (config === 'Special') {\n        if (special === 'All books') {\n            config = '-unix';\n        } else {\n            config = 'verse';\n        }\n    }\n\n    let splitOn = /[\\s:\\s-]+/;\n    if (config === 'verse') {\n        let result = input.sort( (a,b) => {\n            let x = a.verse.split(splitOn);\n            let y = b.verse.split(splitOn);\n            let sortLength = Math.min(x.length, y.length);\n            for (let i = 0; i < sortLength; i++) {\n                if (x[i] !== y[i]) { return x[i] - y[i]; }\n            }\n        });\n        return result;\n    } else if (!Array.isArray(config) || (Array.isArray(config) && config.length === 1)) {\n        let propertyToCheck: string = !Array.isArray(config) ? config : config[0];\n        let desc = propertyToCheck.substr(0, 1) === '-';\n\n        // Basic array\n        if (!propertyToCheck || propertyToCheck === '-' || propertyToCheck === '+') {\n            return !desc ? input.sort() : input.sort().reverse();\n        } else {\n            let property: string = propertyToCheck.substr(0, 1) === '+'\n                || propertyToCheck.substr(0, 1) === '-'\n                ? propertyToCheck.substr(1)\n                : propertyToCheck;\n\n            return input.sort(function(a: any, b: any) {\n                return !desc\n                    ? OrderBy._orderByComparator(a[property], b[property])\n                    : -OrderBy._orderByComparator(a[property], b[property]);\n            });\n        }\n    } else {\n        // Loop over property of the array in order and sort\n        return input.sort(function(a: any, b: any) {\n            for(let i = 0; i < config.length; i++) {\n                let desc = config[i].substr(0, 1) === '-';\n                let property = config[i].substr(0, 1) === '+' || config[i].substr(0, 1) === '-'\n                    ? config[i].substr(1)\n                    : config[i];\n\n                let comparison = !desc\n                    ? OrderBy._orderByComparator(a[property], b[property])\n                    : -OrderBy._orderByComparator(a[property], b[property]);\n\n                // Don't return 0 yet in case of needing to sort by next property\n                if (comparison !== 0) { return comparison; }\n            }\n\n            return 0; // equal each other\n        });\n    }\n  }\n\n}\n"]}