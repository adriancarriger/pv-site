{"version":3,"file":"filter-default.component.js","sourceRoot":"","sources":["../../../Users/adriancarriger/pv/site/tmp/broccoli_type_script_compiler-input_base_path-q8wR28Kh.tmp/0/src/app/components/filter-default/filter-default.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ElementRef,\n  OnInit,\n  ViewEncapsulation,\n  Input,\n  Output,\n  EventEmitter } from '@angular/core';\nimport { GlobalEventsService } from '../../services/global-events.service';\nimport {SELECT_DIRECTIVES} from 'ng2-select';\nimport { Control } from '@angular/common';\nimport 'rxjs/add/operator/debounceTime';\n\n@Component({\n  moduleId: module.id,\n  selector: 'as-filter-default',\n  encapsulation: ViewEncapsulation.None,\n  templateUrl: 'filter-default.component.html',\n  styleUrls: ['filter-default.component.css'],\n  directives: [SELECT_DIRECTIVES]\n})\nexport class FilterDefaultComponent implements OnInit {\n  @Input() inputData;\n  @Output() update = new EventEmitter();\n  public term = '';\n  public termControl;\n  public outputData = {\n    term: '',\n    box1: undefined,\n    box2: undefined,\n    box3: undefined\n  };\n  public stuck = false;\n  constructor(private globalEventsService: GlobalEventsService, public element: ElementRef) {\n    this.termControl = new Control();\n  }\n  ngOnInit() {\n    let el = this.element.nativeElement;\n    let filterOffset = el.firstChild.offsetTop;\n    let navHeight = document.getElementById('navbar').offsetHeight;\n    let stickyPoint = filterOffset - navHeight;\n    this.globalEventsService.scroll$.subscribe(data => {\n      let yPos = data.path[1].pageYOffset;\n      this.stuck = yPos >= stickyPoint;\n    });\n\n    this.inputData.box1.unshift(this.inputData.defaults.box1);\n    this.inputData.box2.unshift(this.inputData.defaults.box2);\n    this.inputData.box3.unshift(this.inputData.defaults.box3);\n\n    this.outputData.box1 = this.inputData.defaults.box1;\n    this.outputData.box2 = this.inputData.defaults.box2;\n    this.outputData.box3 = this.inputData.defaults.box3;\n\n    this.update.emit( this.outputData );\n\n    this.termControl.valueChanges\n      .debounceTime(1000) // Long debounce for short searches\n      .subscribe(newValue => {\n        this.term = newValue;\n        if (this.term.length >= 3 || this.term.length === 0) { return; }\n        this.sendOutput('term', this.term);\n      });\n  }\n\n  sendOutput(key, value, debounceWait?) {\n    if (!debounceWait || value.length >= 3 || value.length === 0) {\n      setTimeout( () => { // Prevent DOM freezing (TODO: webworkers)\n        this.outputData[key] = value;\n        this.update.emit( this.outputData );\n      }, 1);\n    }\n\n  }\n\n}\n"]}